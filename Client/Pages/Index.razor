@page "/"

@using LifeHelper.Shared.Models.LIFF

@inject IHttpClientFactory clientFactory

<PageTitle>小記帳</PageTitle>

<Loading IsLoading="@(monthlyAccounting==null)"></Loading>

@if (monthlyAccounting != null)
{
    <MonthlyAccounting model="@monthlyAccounting"></MonthlyAccounting>
}

@code {
    private MonthlyAccountingVm? monthlyAccounting;

    private HttpClient httpClient => clientFactory.CreateClient(nameof(HttpClient));

    protected override async Task OnInitializedAsync()
    {
        var repMsg = await httpClient.GetAsync("AccountingBook/MonthlyAccounting");

        monthlyAccounting = await repMsg.Content.ReadFromJsonAsync<MonthlyAccountingVm?>();

        await base.OnInitializedAsync();

    }
}