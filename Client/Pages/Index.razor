@page "/"

@using LifeHelper.Shared.Models.LIFF
@using LifeHelper.Client.Service

@inject HttpClient httpClient
@inject LIFFService liff
@inject AuthService auth
@inject NavigationManager uriHelper

<PageTitle>小記帳</PageTitle>

<Loading IsLoading="@(monthlyAccounting==null)"></Loading>

@if (monthlyAccounting != null)
{
    <MonthlyAccounting model="@monthlyAccounting"></MonthlyAccounting>
}

@code {
    private MonthlyAccountingVm? monthlyAccounting;

    protected override async Task OnInitializedAsync()
    {
        var repMsg = await httpClient.GetAsync("AccountingBook/MonthlyAccounting");

        monthlyAccounting = await repMsg.Content.ReadFromJsonAsync<MonthlyAccountingVm?>();

        await base.OnInitializedAsync();

    }
}