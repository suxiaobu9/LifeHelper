@using LifeHelper.Shared.Models.LIFF


@if (model == null)
    return;

<div class="flex flex-row justify-center mt-6 font-mono">
    <div class="md:w-8/12 w-11/12 text-center text-xl">
        <div class="w-full border-2 rounded-t-3xl border-amber-600 flex justify-center">
            <label class="py-1 font-bold text-amber-600">收入</label>
        </div>
        <div class="flex">
            <div class="w-1/2 border-l-2 border-b-2 border-amber-600 flex justify-center">
                <label class="py-1 font-bold text-amber-600">項目</label>
            </div>
            <div class="w-1/2 border-r-2 border-b-2 border-amber-600 flex justify-center">
                <label class="py-1 font-bold text-amber-600">金額</label>
            </div>
        </div>
        @if (model.Income != null)
        {
            foreach (var item in model.Income)
            {
                <div class="flex">
                    <div class="w-1/2 border-l-2 border-r-2 border-amber-600 flex justify-center">
                        <label class="py-2 font-bold">@item.Event</label>
                    </div>
                    <div class="w-1/2 border-r-2 border-amber-600 flex justify-center">
                        <label class="py-2 font-bold">@item.Amount</label>
                    </div>
                </div>
            }
        }
        <div class="w-full border-x-2 border-b-2 border-amber-600 bg-red-100 flex justify-center">
            <label class="py-1 font-bold text-black">總收入  @model.TotalIncome</label>
        </div>

        <div class="mt-10 w-full rounded-t-3xl bg-amber-600 flex justify-center">
            <label class="py-1 font-bold text-white">總花費  @model.TotalOutlay</label>
        </div>

        <div class="flex">
            <div class="w-1/3 flex justify-center">
                <label class="p-2 font-bold text-amber-600">類型</label>
            </div>
            <div class="w-1/3 flex justify-center border-x-2 border-amber-600">
                <label class="p-2 font-bold text-amber-600">總金額</label>
            </div>
            <div class="w-1/3 flex justify-center">
                <label class="p-2 font-bold text-amber-600">占比</label>
            </div>
        </div>
        @if (model.ReportDetails != null)
        {
            for (var i = 0; i < model.ReportDetails.Length; i++)
            {
                var item = model.ReportDetails[i];

                var bgCol = i / 3 % 2 == 0 ? "bg-orange-100" : "bg-red-100";

                <div class="flex">
                    <div class="w-1/3 flex justify-center @bgCol">
                        <label class="p-2 font-bold">@item.Event</label>
                    </div>
                    <div class="w-1/3 flex justify-center @bgCol border-x-2 border-amber-600">
                        <label class="p-2 font-bold">@item.Total</label>
                    </div>
                    <div class="w-1/3 flex justify-center @bgCol">
                        <label class="p-2 font-bold">@item.Proportion%</label>
                    </div>
                </div>
            }
        }

        <div class="mt-10 w-full rounded-t-3xl bg-indigo-600 flex justify-center">
            <label class="py-1 font-bold text-white">支出細項</label>
        </div>
        <div class="flex">
            <div class="w-1/3 flex justify-center">
                <label class="p-2 font-bold text-amber-600">日期</label>
            </div>
            <div class="w-1/3 flex justify-center border-x-2 border-indigo-600">
                <label class="p-2 font-bold text-amber-600">內容</label>
            </div>
            <div class="w-1/3 flex justify-center">
                <label class="p-2 font-bold text-amber-600">金額</label>
            </div>
        </div>

        @if (model.Outlay != null)
        {
            for (var i = 0; i<model.Outlay.Length ; i++)
            {
                var item = model.Outlay[i];
                var bgCol = i / 3 % 2 == 0 ? "bg-indigo-100" : "bg-red-100";

                <div class="flex">
                    <div class="w-1/3 flex justify-center @bgCol">
                        <label class="p-2 font-bold">@item.Date.ToString("MM/dd")</label>
                    </div>
                    <div class="w-1/3 flex justify-center @bgCol border-x-2 border-indigo-600">
                        <label class="p-2 font-bold">@item.Event</label>
                    </div>
                    <div class="w-1/3 flex justify-center @bgCol">
                        <label class="p-2 font-bold">@item.Amount</label>
                    </div>
                </div>
            }
        }
    </div>
</div>

@code {

    [Parameter]
    public MonthlyAccountingVm? model { get; set; }

}
